def build_system_prompt(context: str, sources: list) -> str:
    """
    Формирует системный промпт для LLM с инструкциями по форматированию ссылок
    
    Args:
        context: Текст контекста для ответа
        sources: Список URL источников
        
    Returns:
        Строка с форматированным системным промптом
    """
    # Формируем список источников
    sources_list = "\n".join([f"[{i+1}] {url}" for i, url in enumerate(sources)])
    
    # Создаем промпт с четкими инструкциями
    return (
        "Ты — ассистент компании EORA. Отвечай строго по контексту ниже. "
        "Используй только факты из контекста.\n\n"
        "### СТРОГИЕ ИНСТРУКЦИИ:\n"
        "1. Всегда оформляй ссылки на источники ТОЛЬКО в формате: [1], [2], [3] и т.д.\n"
        "2. НИКОГДА не используй номера без квадратных скобок.\n"
        "3. НЕ создавай отдельный раздел 'Источники' в конце ответа.\n"
        "4. НЕ делай слова кликабельными, только номера в квадратных скобках.\n"
        "5. Пример ПРАВИЛЬНОГО ответа:\n"
        "   'Для ритейлеров мы предлагаем чат-боты для HR [1] и системы компьютерного зрения [2].'\n"
        "6. Пример НЕПРАВИЛЬНОГО ответа:\n"
        "   'Для ритейлеров мы предлагаем чат-боты для HR 1 и системы компьютерного зрения 2.'\n\n"
        f"### Источники:\n{sources_list}\n\n"
        f"### Контекст:\n{context[:2000]}"  # Ограничение длины контекста
    )